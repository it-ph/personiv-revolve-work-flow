var qualityControlModule=angular.module("quality_control",["sharedModule"]);qualityControlModule.config(["$stateProvider",function(e){e.state("main",{url:"/",views:{"":{templateUrl:"/app/shared/views/main.view.html",controller:"sharedMainViewController"},"content-container@main":{templateUrl:"/app/shared/views/content-container.view.html",controller:"sharedDashboardContentContainerController"},"toolbar@main":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"subheader@main":{templateUrl:"/app/shared/templates/subheaders/dashboard-subheader.template.html"},"content@main":{templateUrl:"/app/shared/templates/content/dashboard-content.template.html"}}}).state("main.settings",{url:"settings",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"settingsContentContainerController"},"toolbar@main.settings":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.settings":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"subheader@main.settings":{templateUrl:"/app/components/admin/templates/subheaders/settings-subheader.template.html"},"content@main.settings":{templateUrl:"/app/components/admin/templates/content/settings-content.template.html"}}}).state("main.tracker",{url:"tracker",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"trackerContentContainerController"},"toolbar@main.tracker":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.tracker":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"subheader@main.tracker":{templateUrl:"/app/shared/templates/subheaders/tracker-subheader.template.html"},"content@main.tracker":{templateUrl:"/app/shared/templates/content/tracker-content.template.html"}}}).state("main.notifications",{url:"notifications",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"sharedNotificationsContentContainerController"},"toolbar@main.notifications":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.notifications":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"content@main.notifications":{templateUrl:"/app/shared/templates/content/notifications-content.template.html"}}}).state("main.upload",{url:"upload",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"uploadContentContainerController"},"toolbar@main.upload":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.upload":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"content@main.upload":{templateUrl:"/app/components/admin/templates/content/upload-content.template.html"}}}).state("main.sheets",{url:"sheets",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"sheetsContentContainerController"},"toolbar@main.sheets":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.sheets":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"subheader@main.sheets":{templateUrl:"/app/components/admin/templates/subheaders/sheets-subheader.template.html"},"content@main.sheets":{templateUrl:"/app/components/admin/templates/content/sheets-content.template.html"}}}).state("main.task",{url:"task/{taskID}",views:{"content-container":{templateUrl:"/app/shared/views/content-container.view.html",controller:"taskContentContainerController"},"toolbar@main.task":{templateUrl:"/app/shared/templates/toolbar.template.html"},"left-sidenav@main.task":{templateUrl:"/app/shared/templates/sidenavs/main-left-sidenav.template.html"},"content@main.task":{templateUrl:"/app/shared/templates/content/task-content.template.html"}}})}]),qualityControlModule.controller("settingsContentContainerController",["$scope","$filter","$timeout","$mdDialog","$mdToast","$mdBottomSheet","$mdMedia","Preloader","Setting","User",function(e,t,a,n,o,l,r,s,i,m){e.toolbar={},e.toolbar.childState="Settings",e.toolbar.getItems=function(a){e.showInactive=!0;var n=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return n},e.toolbar.searchAll=!0,e.showSearchBar=function(){e.type.busy=!0,e.searchBar=!0},e.hideSearchBar=function(){e.type.busy=!1,e.searchBar=!1,e.toolbar.searchText="",e.toolbar.searchItem="",e.showInactive=!1,e.searched&&(e.type.page=1,e.type.no_matches=!1,e.type.items=[],e.searched=!1)},e.searchUserInput=function(){e.type.busy=!0,e.isLoading=!0,e.type.show=!1,e.query={},e.query.searchText=e.toolbar.searchText,e.query.withTrashed=!0,i.search(e.subheader.currentNavItem,e.query).success(function(t){e.toolbar.items=[],t.length?(angular.forEach(t,function(e){c(e)}),e.type.items=t):(e.type.items=[],e.type.no_matches=!0),e.searched=!0,e.type.show=!0,e.isLoading=!1}).error(function(e){s.error()})},e.fab={},e.fab.icon="mdi-plus";var p=function(t){var a="create",o=i.settingController(a,t),l=i.settingDialogTemplate(a,t);e.fab.label=t,e.fab.action=function(){n.show({controller:o,templateUrl:"/app/components/admin/templates/dialogs/"+l,parent:angular.element(document.body),fullscreen:!0}).then(function(){e.type.busy=!0,e.isLoading=!0,e.type.show=!1,i.fabCreateSuccessMessage(t).then(function(){e.init(e.subheader.currentNavItem)})},function(){})},e.toolbar.items=[],e.init(t),e.item_menu=[{label:"Edit",icon:"mdi-pencil",action:function(t){var a="edit",o=i.settingController(a,e.subheader.currentNavItem),l=i.settingDialogTemplate(a,e.subheader.currentNavItem);s.set(t),n.show({controller:o,templateUrl:"/app/components/admin/templates/dialogs/"+l,parent:angular.element(document.body),fullscreen:!0}).then(function(){e.type.busy=!0,e.isLoading=!0,e.type.show=!1;var a=t.name+" has been updated.";s.notify(a).then(function(){e.init(e.subheader.currentNavItem)})},function(){})}},{label:"Delete",icon:"mdi-delete",action:function(t){var a=n.confirm().title("Delete").textContent("Delete "+t.name+"?").ariaLabel("Delete").ok("Delete").cancel("Cancel");n.show(a).then(function(){e.type.busy=!0,e.isLoading=!0,e.type.show=!1,i["delete"](e.subheader.currentNavItem,t).success(function(){var a=t.name+" has been removed.";s.notify(a).then(function(){e.init(e.subheader.currentNavItem)})}).error(function(){s.error()})},function(){})}}]};e.subheader={},e.subheader.show=!0,e.subheader.navs=[{label:"Categories",action:function(){p(this.label)}},{label:"Clients",action:function(){p(this.label)}}],e.subheader.sort=[{label:"Name",type:"name",sortReverse:!1},{label:"Recently added",type:"created_at",sortReverse:!1}],e.subheader.refresh=function(){e.isLoading=!0,e.type.show=!1,e.init(e.subheader.currentNavItem)},e.subheader.toggleActive=function(){e.showInactive=!e.showInactive},e.subheader.sortBy=function(t){t.sortReverse=!t.sortReverse,e.sortType=t.type,e.sortReverse=t.sortReverse},e.showOptions=function(t){t.deleted_at||(t.item_menu=e.item_menu,s.set(t),r("xs")||r("sm")?(e.fab.show=!1,l.show({templateUrl:"/app/shared/templates/bottom-sheets/item-actions-bottom-sheet.template.html",controller:"itemActionsBottomSheetController"}).then(function(a){e.item_menu[a].action(t)},function(){e.fab.show=!0})):n.show({controller:"itemActionsDialogController",templateUrl:"/app/shared/templates/dialogs/item-actions-dialog.template.html",parent:angular.element(document.body),clickOutsideToClose:!0}).then(function(a){e.item_menu[a].action(t)},function(){}))},e.rightSidenav={},e.rightSidenav.show=!1;var c=function(t){t.first_letter=t.name.charAt(0).toUpperCase(),t.created_at=new Date(t.created_at),t.deleted_at=t.deleted_at?new Date(t.deleted_at):null;var a={};a.display=t.name,e.toolbar.items.push(a)};e.init=function(t){e.type={},e.type.items=[],e.searched&&(e.searchBar=!1,e.toolbar.searchText="",e.toolbar.searchItem="",e.type.page=1,e.type.no_matches=!1,e.searched=!1),e.type.page=2,i.paginate(t).success(function(a){e.type.details=a,e.type.items=a.data,e.type.show=!0,e.fab.show=!0,e.showInactive=!1,a.data.length&&angular.forEach(a.data,function(e){c(e)}),e.type.paginateLoad=function(){return e.type.busy||e.type.page>e.type.details.last_page?void(e.isLoading=!1):(e.type.busy=!0,e.isLoading=!0,void i.paginate(t,e.type.page).success(function(t){e.type.page++,angular.forEach(t.data,function(t,a){c(t),e.type.items.push(t)}),e.type.busy=!1,e.isLoading=!1}))}})},e.subheader.currentNavItem=e.subheader.navs[0].label,e.fab.label=e.subheader.navs[0].label,p(e.subheader.currentNavItem)}]);